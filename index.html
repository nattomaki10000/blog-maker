<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Editor - nattomaki10000</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/js/all.min.js" defer></script>
    <script src="https://esm.sh/css-doodle/css-doodle.min.js?raw"></script>
    
    <style>
        /* 基本スタイルと背景（提供コードを継承） */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            background-color: #0a0c27;
            color: #ffffff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .background { position: fixed; inset: 0; z-index: -2; }
        
        /* 隕石アニメーション */
        .inseki-container { position: fixed; inset: 0; z-index: -1; pointer-events: none; }
        .inseki::before {
            content: ""; position: absolute; width: 4px; height: 4px; background: transparent;
            box-shadow: 64px 4px 0 rgb(199, 0, 0), 48px 8px 0 rgb(255, 90, 0), 60px 8px 0 rgb(199, 0, 0), 32px 12px 0 rgb(235, 255, 37), 44px 12px 0 rgb(255, 90, 0), 56px 12px 0 rgb(199, 0, 0), 28px 16px 0 rgb(238, 255, 0), 40px 16px 0 rgb(255, 90, 0), 24px 20px 0 rgb(238, 255, 0), 48px 20px 0 rgb(199, 0, 0), 60px 20px 0 rgb(255, 75, 0), 32px 24px 0 rgb(255, 90, 0), 44px 24px 0 rgb(179, 0, 0), 56px 24px 0 rgb(255, 75, 0), 16px 28px 0 rgb(238, 255, 0), 28px 28px 0 rgb(255, 102, 0), 40px 28px 0 rgb(179, 0, 0), 52px 28px 0 rgb(255, 75, 0), 12px 32px 0 rgb(238, 255, 0), 24px 32px 0 rgb(255, 102, 0), 36px 32px 0 rgb(179, 0, 0), 12px 36px 0 rgb(133, 0, 0), 16px 36px 0 rgb(97, 39, 0), 20px 36px 0 rgb(133, 0, 0), 24px 36px 0 rgb(133, 0, 0), 32px 36px 0 rgb(179, 0, 0), 44px 36px 0 rgb(255, 75, 0), 56px 36px 0 rgb(235, 255, 37), 8px 40px 0 rgb(97, 39, 0), 12px 40px 0 rgb(97, 39, 0), 16px 40px 0 rgb(133, 0, 0), 20px 40px 0 rgb(133, 0, 0), 24px 40px 0 rgb(97, 39, 0), 28px 40px 0 rgb(97, 39, 0), 40px 40px 0 rgb(255, 75, 0), 52px 40px 0 rgb(235, 255, 37), 4px 44px 0 rgb(97, 39, 0), 8px 44px 0 rgb(97, 39, 0), 12px 44px 0 rgb(97, 39, 0), 16px 44px 0 rgb(97, 39, 0), 20px 44px 0 rgb(97, 39, 0), 24px 44px 0 rgb(133, 0, 0), 28px 44px 0 rgb(133, 0, 0), 32px 44px 0 rgb(97, 39, 0), 36px 44px 0 rgb(255, 75, 0), 48px 44px 0 rgb(235, 255, 37), 4px 48px 0 rgb(82, 16, 0), 8px 48px 0 rgb(82, 16, 0), 12px 48px 0 rgb(97, 39, 0), 16px 48px 0 rgb(97, 39, 0), 20px 48px 0 rgb(97, 39, 0), 24px 48px 0 rgb(97, 39, 0), 28px 48px 0 rgb(133, 0, 0), 32px 48px 0 rgb(97, 39, 0), 4px 52px 0 rgb(51, 10, 0), 8px 52px 0 rgb(82, 16, 0), 12px 52px 0 rgb(82, 16, 0), 16px 52px 0 rgb(97, 39, 0), 20px 52px 0 rgb(97, 39, 0), 24px 52px 0 rgb(97, 39, 0), 28px 52px 0 rgb(97, 39, 0), 32px 52px 0 rgb(133, 0, 0), 40px 52px 0 rgb(235, 255, 37), 4px 56px 0 rgb(51, 10, 0), 8px 56px 0 rgb(51, 10, 0), 12px 56px 0 rgb(82, 16, 0), 16px 56px 0 rgb(82, 16, 0), 20px 56px 0 rgb(97, 39, 0), 24px 56px 0 rgb(97, 39, 0), 28px 56px 0 rgb(97, 39, 0), 32px 56px 0 rgb(97, 39, 0), 36px 56px 0 rgb(235, 255, 37), 8px 60px 0 rgb(51, 10, 0), 12px 60px 0 rgb(51, 10, 0), 16px 60px 0 rgb(82, 16, 0), 20px 60px 0 rgb(82, 16, 0), 24px 60px 0 rgb(97, 39, 0), 28px 60px 0 rgb(97, 39, 0), 12px 64px 0 rgb(51, 10, 0), 16px 64px 0 rgb(51, 10, 0), 20px 64px 0 rgb(82, 16, 0), 24px 64px 0 rgb(97, 39, 0);
        }
        .animated { animation: inseki 4s infinite linear; }
        @keyframes inseki {
            0% { transform: translate(100vw, -10vh) scale(1); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translate(-20vw, 110vh) scale(1.5); opacity: 0; }
        }

        /* 編集用カードレイアウト */
        .editor-container {
            width: 95%;
            max-width: 900px;
            margin: 40px 0;
            z-index: 1;
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            -webkit-backdrop-filter: blur(15px);
            backdrop-filter: blur(15px);
            border-radius: 15px;
            padding: 50px;
            border: 1px solid rgba(255, 74, 74, 0.2);
            box-shadow: 0 10px 40px rgba(0,0,0,0.6);
            min-height: 80vh;
        }

        /* Googleドキュメント風の編集領域 */
        .editable-area {
            outline: none;
            min-height: 60vh;
            line-height: 1.8;
            font-size: 1.1rem;
            color: #efefef;
        }

        /* プレースホルダー（空の時のヒント） */
        .editable-area:empty:before {
            content: "ここに記事を書き込んでください...";
            color: rgba(255, 255, 255, 0.3);
            pointer-events: none;
        }

        .post-title {
            font-size: 2.8rem;
            color: #ff4a4a;
            margin-bottom: 10px;
            border: none;
            background: transparent;
            width: 100%;
            outline: none;
            font-weight: bold;
        }

        .controls {
            position: sticky;
            top: 20px;
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            z-index: 10;
        }

        .btn {
            background: rgba(255, 74, 74, 0.8);
            border: none;
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: 0.3s;
        }

        .btn:hover { background: #ff0000; box-shadow: 0 0 15px rgba(255,0,0,0.5); }

        /* 装飾 */
        h2 { color: #ff9e9e; border-left: 5px solid #ff4a4a; padding-left: 15px; margin-top: 30px; }
        blockquote { background: rgba(255, 74, 74, 0.1); border-left: 4px solid #ff4a4a; padding: 15px; font-style: italic; }

        @media (max-width: 768px) {
            .card { padding: 25px; }
            .post-title { font-size: 1.8rem; }
        }
    </style>
</head>
<body>

    <css-doodle click-to-update class="background">
        <style>
          @grid: 1 / 100vw 100vh / #0a0c27;
          background-size: 200px 200px;
          background-image: @doodle(
            @grid: 6 / 100%; @size: 4px; font-size: 4px;
            color: hsl(@r240, 30%, 50%);
            box-shadow: @m3x5(calc(4em - @nx * 1em) calc(@ny * 1em) @p(@m3(currentColor), @m2(transparent)), calc(2em + @nx * 1em) calc(@ny * 1em) @lp);
          );
        </style>
    </css-doodle>

    <div class="inseki-container"><div class="animated inseki"></div></div>

    <div class="editor-container">
        <div class="controls">
            <button class="btn" onclick="document.execCommand('formatBlock', false, 'H2')">見出し</button>
            <button class="btn" onclick="document.execCommand('bold', false, null)"><b>B</b></button>
            <button class="btn" onclick="saveContent()"><i class="fas fa-save"></i> ブラウザに保存</button>
            <button class="btn" style="background:#555" onclick="downloadHTML()"><i class="fas fa-download"></i> HTMLとして書き出し</button>
        </div>

        <div class="card">
            <div id="post-title" class="post-title" contenteditable="true">無題の記事</div>
            <hr style="border: 0; border-top: 1px solid rgba(255,74,74,0.3); margin: 20px 0;">
            
            <div id="editor" class="editable-area" contenteditable="true">
                <p>ここに自由に文章を入力してください。画像（URL）の貼り付けや、テキストのコピー＆ペーストも可能です。</p>
            </div>
        </div>
    </div>

    <script>
        // ブラウザ保存機能
        function saveContent() {
            const title = document.getElementById('post-title').innerHTML;
            const body = document.getElementById('editor').innerHTML;
            localStorage.setItem('blog-draft-title', title);
            localStorage.setItem('blog-draft-body', body);
            alert("ブラウザに保存されました。再読み込みしても消えません。");
        }

        // 読み込み時に復元
        window.onload = () => {
            if(localStorage.getItem('blog-draft-title')) {
                document.getElementById('post-title').innerHTML = localStorage.getItem('blog-draft-title');
                document.getElementById('editor').innerHTML = localStorage.getItem('blog-draft-body');
            }
        };

        // HTMLファイルとしてダウンロード
        function downloadHTML() {
            const title = document.getElementById('post-title').innerText;
            const content = document.documentElement.outerHTML;
            const blob = new Blob([content], { type: 'text/html' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = `${title}.html`;
            a.click();
        }
    </script>
</body>
</html>
